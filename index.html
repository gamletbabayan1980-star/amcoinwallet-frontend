<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AMCOIN (AMC) ‚Äî Jetton –Ω–∞ TON</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f5f3ff',
              100: '#ede9fe',
              200: '#ddd6fe',
              300: '#c4b5fd',
              400: '#a78bfa',
              500: '#8b5cf6',
              600: '#7c3aed',
              700: '#6d28d9',
              800: '#5b21b6',
              900: '#4c1d95'
            }
          },
          backgroundImage: {
            'gradient-bg': 'linear-gradient(135deg, #4c1d95, #7e22ce, #2d1b69)',
          }
        }
      }
    }
  </script>
  <style>
    body {
      background: linear-gradient(135deg, #4c1d95, #7e22ce, #2d1b69);
      min-height: 100vh;
    }
    .transaction-list {
      max-height: 160px;
      overflow-y: auto;
    }
  </style>
</head>
<body class="flex items-center justify-center p-4">
  <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-6 w-full max-w-md border border-white/20">
    <!-- Header -->
    <div class="text-center mb-6">
      <div class="w-16 h-16 bg-gradient-to-r from-purple-400 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4">
        <span class="text-2xl font-bold text-white">AM</span>
      </div>
      <h1 class="text-3xl font-bold text-white mb-2">AMCOIN (AMC)</h1>
      <p class="text-purple-200 text-sm">Jetton token on The Open Network</p>
    </div>

    <!-- Balances -->
    <div class="space-y-4 mb-6">
      <div class="bg-white/10 rounded-xl p-4 border border-white/10">
        <div class="flex justify-between items-center">
          <span class="text-purple-200">TON Balance</span>
          <span id="ton-balance" class="text-white font-semibold">‚Äî</span>
        </div>
      </div>

      <div class="bg-white/10 rounded-xl p-4 border border-white/10">
        <div class="flex justify-between items-center">
          <span class="text-purple-200">AMCOIN Balance</span>
          <span id="amc-balance" class="text-yellow-300 font-bold text-lg">‚Äî</span>
        </div>
      </div>

      <button id="connect-wallet" class="w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg">
        üíº –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫
      </button>

      <!-- Wallet Address Input -->
      <div class="mt-2">
        <label for="wallet-address" class="block text-purple-200 text-sm mb-1">–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:</label>
        <input 
          type="text" 
          id="wallet-address" 
          placeholder="EQ..." 
          class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-purple-500"
        />
        <button 
          id="check-address" 
          class="mt-2 w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200"
        >
          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
        </button>
      </div>
    </div>

    <!-- Mining -->
    <button
      onclick="alert('‚úÖ 10 AMC –Ω–∞—á–∏—Å–ª–µ–Ω–æ! –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏.');"
      class="w-full bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg mb-6"
    >
      ‚õèÔ∏è –ú–∞–π–Ω–∏—Ç—å 10 AMC
    </button>

    <!-- Transaction History -->
    <div class="mb-6">
      <h2 class="text-white font-semibold mb-3 text-center">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
      <div class="transaction-list space-y-2">
        <div class="p-3 rounded-lg text-sm bg-green-900/30 border border-green-800/50">
          <div class="flex justify-between">
            <span class="text-green-300">üì• –ü–æ–ª—É—á–µ–Ω–æ</span>
            <span class="text-white font-medium">10.00 AMC</span>
          </div>
          <div class="text-gray-400 text-xs mt-1">12 –∏—é–Ω—è, 18:42</div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col gap-3">
      <a
        href="https://ston.fi/swap?from=TON&to=EQAfysdj5lEz7LfEjybqSe-TFLdC1bMEW5zOvACn2xCjcIKV"
        target="_blank"
        rel="noopener noreferrer"
        class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium py-3 px-4 rounded-xl text-center transition-all duration-200 shadow-lg"
      >
        üí± –°–≤–æ–ø–Ω—É—Ç—å –Ω–∞ Ston.fi
      </a>
      <button id="disconnect-btn" class="w-full bg-white/20 hover:bg-white/30 text-white font-medium py-2 px-4 rounded-xl transition-all duration-200">
        –°–º–µ–Ω–∏—Ç—å –∫–æ—à–µ–ª—ë–∫
      </button>
    </div>

    <!-- Footer -->
    <div class="mt-8 text-center text-xs text-purple-300/70">
      <p>AMCOIN ‚Äî —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ —Å–µ—Ç–∏ TON</p>
      <p class="mt-1">–ö–æ–Ω—Ç—Ä–∞–∫—Ç: EQAfysdj5lEz7LfEjybqSe...</p>
    </div>
  </div>

  <!-- TON Connect + TON SDK -->
  <script src="https://unpkg.com/@tonconnect/ui@2.0.0/dist/tonconnect-ui.min.js"></script>
  <script src="https://unpkg.com/ton@13.0.0/dist/index.min.js"></script>

  <script>
    // –í–°–¢–†–û–ï–ù–ù–´–ô –ú–ê–ù–ò–§–ï–°–¢ ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∞–π–ª–∞
    const manifest = {
      url: "https://gamletbabayan1980-star.github.io/amcoinwallet-frontend/",
      name: "AMCOIN"
    };

    const AMCOIN_ADDRESS = "EQAfysdj5lEz7LfEjybqSe-TFLdC1bMEW5zOvACn2xCjcIKV";

    const tonConnectUI = new window.TonConnectUI.TonConnectUI({
      manifest: manifest,
      buttonRootId: "connect-wallet"
    });

    async function fetchBalances(address) {
      try {
        const client = new window.Ton.TonClient({ endpoint: "https://toncenter.com/api/v2/jsonRPC" });
        const walletAddress = new window.Ton.Address(address);
        const tonBalance = await client.getBalance(walletAddress);
        document.getElementById("ton-balance").textContent = (Number(tonBalance) / 1e9).toFixed(3) + " TON";

        const jettonMaster = new window.Ton.Address(AMCOIN_ADDRESS);
        const jettonWallet = await client.callGetMethod(walletAddress, "get_wallet_address", [
          { type: "slice", cell: jettonMaster.toRawString() }
        ]);
        
        if (jettonWallet.exit_code === 0) {
          const jettonWalletAddress = new window.Ton.Address(jettonWallet.stack[0].cells[0].bits);
          const balanceResult = await client.callGetMethod(jettonWalletAddress, "get_wallet_data");
          const amcBalance = balanceResult.stack[0]?.value || 0;
          document.getElementById("amc-balance").textContent = (Number(amcBalance) / 1e9).toFixed(2) + " AMC";
        } else {
          document.getElementById("amc-balance").textContent = "0.00 AMC";
        }
      } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞:", error);
        document.getElementById("ton-balance").textContent = "‚Äî";
        document.getElementById("amc-balance").textContent = "‚Äî";
      }
    }

    tonConnectUI.onStatusChange(wallet => {
      if (wallet) {
        document.getElementById("connect-wallet").innerHTML = "‚úÖ –ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω";
        fetchBalances(wallet.account.address);
      } else {
        document.getElementById("connect-wallet").innerHTML = "üíº –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫";
        document.getElementById("ton-balance").textContent = "‚Äî";
        document.getElementById("amc-balance").textContent = "‚Äî";
      }
    });

    document.getElementById("disconnect-btn").addEventListener("click", () => {
      tonConnectUI.disconnect();
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–æ –≤–≤–µ–¥—ë–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É
    document.getElementById("check-address").addEventListener("click", async () => {
      const addressInput = document.getElementById("wallet-address");
      const address = addressInput.value.trim();
      
      if (!address) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞");
        return;
      }
      
      try {
        new window.Ton.Address(address); // –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞
        fetchBalances(address);
      } catch (error) {
        alert("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞");
        console.error("Invalid address:", error);
      }
    });
  </script>
</body>
</html>
